// filepath: /Users/nguyenhai/Documents/GitHub/My-Portfolio/src/App.jsx
import React, { lazy, Suspense } from 'react';
import { SpeedInsights } from "@vercel/speed-insights/react";
import { Analytics } from "@vercel/analytics/react";
import ErrorBoundary from './components/common/ErrorBoundary';
import Header from './layouts/Header';
import './App.css';

// Lazy load non-critical components
const Home = lazy(() => import('./pages/Home/Profile'));
const About = lazy(() => import('./pages/About/About'));
const Portfolio = lazy(() => import('./pages/Portfolio/Portfolio'));
const Contact = lazy(() => import('./pages/Contact/Contact'));

// Loading fallback
const LoadingFallback = () => (
  <div className="loading-container">
    <div className="loading-spinner"></div>
  </div>
);

const App = () => {
  return (
    <div className="app">
      <ErrorBoundary>
        <Header />
      </ErrorBoundary>
      
      <ErrorBoundary>
        <Suspense fallback={<LoadingFallback />}>
          <Home />
        </Suspense>
      </ErrorBoundary>
      
      <ErrorBoundary>
        <Suspense fallback={<LoadingFallback />}>
          <About />
        </Suspense>
      </ErrorBoundary>
      
      <ErrorBoundary>
        <Suspense fallback={<LoadingFallback />}>
          <Portfolio />
        </Suspense>
      </ErrorBoundary>
      
      <ErrorBoundary>
        <Suspense fallback={<LoadingFallback />}>
          <Contact />
        </Suspense>
      </ErrorBoundary>
      
      {/* Vercel Analytics */}
      <Analytics />
      <SpeedInsights />
    </div>
  );
};

export default App;
